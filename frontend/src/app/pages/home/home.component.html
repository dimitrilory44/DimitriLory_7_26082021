<app-header *ngIf="!errorServeur"></app-header>

<main>
    <error-client [errorClient]="errorMessage" *ngIf="errorMessage"></error-client>
    <error-serveur [error]="errorServeur" *ngIf="errorServeur"></error-serveur>
    <section id="createPost" class="container" *ngIf="!errorServeur">
        <form [formGroup]="createPost" (ngSubmit)="onSubmit()">
            <mat-card class="new-post--card">
                <mat-card-header class="new-post--card--header">
                    <div class="avatar--contenu">
                        <div mat-card-avatar *ngIf="image == null">
                            <img class="avatar" src="../../../../assets/guest.png" alt="" width="40" height="40">
                        </div>
                        <div mat-card-avatar *ngIf="image">
                            <img class="avatar" [src]="image" alt="" width="40" height="40">
                        </div>
                        <div class="form-search">
                            <textarea name="contenu" placeholder="Contenu de votre post" formControlName="contenu"></textarea>
                        </div>
                    </div>
                </mat-card-header>
                <mat-card-content class="new-post--card--content" *ngIf="url != null">
                    <img [src]="url" alt="" class="new-post--image">
                </mat-card-content>
                <mat-divider></mat-divider>
                <mat-card-actions class="new-post--card--actions">
                    <button mat-button>
                        <input type="file" name="image" (change)="onSelectFile($event)" formControlName="image"/>
                        <mat-icon class="icon-file">add_photo_alternate</mat-icon>
                        <span class="image">Image</span>
                    </button>
                    <button mat-button type="submit">
                        <mat-icon class="icon-sent">send</mat-icon>
                        <span class="send">Publier</span>
                    </button>
                </mat-card-actions>
            </mat-card>
        </form>
    </section>
    <post-list [postList]="posts" [errorServeur]="errorServeur"></post-list>
</main>